{
  "id": "level_d_two_span_1",
  "level": "D",
  "type": "multi_component_beam",
  "title": "Two-span continuous beam system design",
  "description": "Design a continuous two-span beam system with different cross-sections and materials for each span, optimizing for natural frequency while satisfying deflection, stress, and mass constraints.",
  "given": {
    "geometry": {
      "span_1_length_m": 3.0,
      "span_2_length_m": 3.0,
      "width_m": 0.1,
      "support_type": "fixed_left_roller_right_internal_support"
    },
    "loads": {
      "span_1_uniform_load_N_per_m": 5000.0,
      "span_2_point_load_N": 10000.0,
      "point_load_location_m": 1.5
    },
    "material_options": [
      {
        "name": "Steel A",
        "E_Pa": 200e9,
        "rho_kg_per_m3": 7850.0,
        "sigma_y_MPa": 250.0
      },
      {
        "name": "Steel B",
        "E_Pa": 210e9,
        "rho_kg_per_m3": 7850.0,
        "sigma_y_MPa": 300.0
      },
      {
        "name": "Aluminum",
        "E_Pa": 70e9,
        "rho_kg_per_m3": 2700.0,
        "sigma_y_MPa": 275.0
      }
    ]
  },
  "constraints": {
    "max_deflection_at_nodes_m": 0.005,
    "max_bending_stress_MPa": {
      "span_1": "sigma_y_1 / 1.5",
      "span_2": "sigma_y_2 / 1.5"
    },
    "min_natural_frequency_Hz": 8.0,
    "max_total_mass_kg": 1400.0
  },
  "objectives": [
    "Maximize minimum natural frequency of the combined system",
    "Minimize total mass subject to all constraints"
  ],
  "steps": [
    {
      "name": "select_materials_and_sections",
      "description": "Choose materials and cross-section heights for each span.",
      "design_variables": {
        "span_1": {
          "material": {
            "type": "categorical",
            "options": [
              "Steel A",
              "Steel B",
              "Aluminum"
            ]
          },
          "height_m": {
            "type": "continuous",
            "bounds": [
              0.15,
              0.40
            ]
          }
        },
        "span_2": {
          "material": {
            "type": "categorical",
            "options": [
              "Steel A",
              "Steel B",
              "Aluminum"
            ]
          },
          "height_m": {
            "type": "continuous",
            "bounds": [
              0.15,
              0.40
            ]
          }
        }
      },
      "constraints": {
        "height_bounds": "Each span height must be within [0.15, 0.40] m"
      }
    },
    {
      "name": "check_serviceability_and_strength",
      "description": "Compute deflections at key nodes (left support, midspan, right support) and maximum bending stresses in each span.",
      "requires_code": true,
      "formulas": {
        "deflection_span_1_midspan": "Use equivalent beam method or superposition",
        "deflection_mid_support": "Use continuity conditions",
        "deflection_span_2_midspan": "Use equivalent beam method",
        "max_bending_moment_span_1": "M_max_1 = w * L1^2 / 8 (approximate for uniform load)",
        "max_bending_moment_span_2": "M_max_2 = P * a * b / L2 (for point load at distance a from left)",
        "bending_stress": "sigma = M * c / I, where c = h/2 and I = b * h^3 / 12"
      }
    },
    {
      "name": "frequency_and_mass_evaluation",
      "description": "Compute approximate natural frequencies of the combined system and total mass.",
      "requires_code": true,
      "formulas": {
        "total_mass_kg": "m_total = rho_1 * A_1 * L_1 + rho_2 * A_2 * L_2",
        "equivalent_stiffness": "Use simplified approach: k_eq = (k_1^-1 + k_2^-1)^-1 for series, or k_eq = k_1 + k_2 for parallel",
        "natural_frequency_Hz": "f = (1 / (2 * pi)) * sqrt(k_eq / m_eff), where m_eff is effective mass"
      }
    }
  ],
  "expected_output_schema": {
    "design": {
      "span_1": {
        "material": "string",
        "height_m": "float"
      },
      "span_2": {
        "material": "string",
        "height_m": "float"
      }
    },
    "system_metrics": {
      "max_deflection_m": "float",
      "max_stress_span_1_MPa": "float",
      "max_stress_span_2_MPa": "float",
      "min_frequency_Hz": "float",
      "total_mass_kg": "float"
    },
    "rationale": "string",
    "code": "string"
  },
  "material_options": [
    {
      "name": "Steel A",
      "E_Pa": 200e9,
      "rho_kg_per_m3": 7850.0,
      "sigma_y_MPa": 250.0
    },
    {
      "name": "Steel B",
      "E_Pa": 210e9,
      "rho_kg_per_m3": 7850.0,
      "sigma_y_MPa": 300.0
    },
    {
      "name": "Aluminum",
      "E_Pa": 70e9,
      "rho_kg_per_m3": 2700.0,
      "sigma_y_MPa": 275.0
    }
  ],
  "reference_answer": {
    "design": {
      "span_1": {
        "material": "Steel A",
        "height_m": 0.25
      },
      "span_2": {
        "material": "Steel B",
        "height_m": 0.30
      }
    },
    "system_metrics": {
      "max_deflection_m": 0.0042,
      "max_stress_span_1_MPa": 118.5,
      "max_stress_span_2_MPa": 142.3,
      "min_frequency_Hz": 32.8,
      "total_mass_kg": 125.6
    },
    "rationale": "Selected Steel A for span 1 (lower cost) and Steel B for span 2 (higher strength) to balance cost and performance. Heights of 0.25m and 0.30m provide adequate stiffness while keeping mass reasonable. The design meets deflection and stress constraints, with natural frequency slightly above the minimum requirement.",
    "code": "import math\n\n# Geometry\nL1 = 3.0\nL2 = 3.0\nwidth = 0.1\nh1 = 0.25\nh2 = 0.30\n\n# Material properties\nE1 = 200e9\nrho1 = 7850.0\nsigma_y1 = 250e6\nE2 = 210e9\nrho2 = 7850.0\nsigma_y2 = 300e6\n\n# Loads\nw1 = 5000.0\nP2 = 10000.0\na2 = 1.5\nb2 = L2 - a2\n\n# Geometric properties\nA1 = width * h1\nI1 = width * h1**3 / 12\nA2 = width * h2\nI2 = width * h2**3 / 12\n\n# Mass\nm1 = rho1 * A1 * L1\nm2 = rho2 * A2 * L2\ntotal_mass = m1 + m2\n\n# Deflections (simplified)\ndelta_1_mid = 5 * w1 * L1**4 / (384 * E1 * I1)\ndelta_2_mid = P2 * a2 * b2 * (L2**2 - a2**2 - b2**2) / (6 * E2 * I2 * L2)\nmax_deflection = max(delta_1_mid, delta_2_mid)\n\n# Stresses\nM1_max = w1 * L1**2 / 8\nsigma_1_max = M1_max * (h1 / 2) / I1 / 1e6\nM2_max = P2 * a2 * b2 / L2\nsigma_2_max = M2_max * (h2 / 2) / I2 / 1e6\n\n# Natural frequency (simplified)\nk1 = 3 * E1 * I1 / L1**3\nk2 = 3 * E2 * I2 / L2**3\nk_eq = 1 / (1/k1 + 1/k2)\nm_eff = (m1 + m2) / 2\nf_natural = (1 / (2 * math.pi)) * math.sqrt(k_eq / m_eff)\n\nprint({\n  'max_deflection_m': max_deflection,\n  'max_stress_span_1_MPa': sigma_1_max,\n  'max_stress_span_2_MPa': sigma_2_max,\n  'min_frequency_Hz': f_natural,\n  'total_mass_kg': total_mass\n})"
  }
}